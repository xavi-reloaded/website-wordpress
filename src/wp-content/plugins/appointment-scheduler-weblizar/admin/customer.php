<script>// multiple select checkboxjQuery(document).ready(function() {	jQuery('#selec_tall_c').click(function(event) {  //on click	if(this.checked) { // check select status		jQuery('.checkbox1').each(function() { //loop through each checkbox			this.checked = true;  //select all checkboxes with class "checkbox1"		});	} else {		jQuery('.checkbox1').each(function() { //loop through each checkbox			this.checked = false; //deselect all checkboxes with class "checkbox1"		});	}	});});// insert clientfunction Save_client() {	function ValidateEmail(email) {		var expr = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;		return expr.test(email);	};	function ValidateString(str) {		// var expr = /^[A-Za-z]+$/;		var expr = /^[A-Za-z0-9]+$/		return expr.test(str);	};	var txtVal77 = jQuery('#C_phone').val();	if( jQuery("#first_name").val()=="") {		jQuery(".validation_alert").hide();  		jQuery("#us1").show();		jQuery("#first_name").focus();		return false;	}		if( jQuery("#last_name").val()=="") {		jQuery(".validation_alert").hide();  		jQuery("#us1").show();		jQuery("#last_name").focus();		return false;	}	if( jQuery("#user_pass").val()=="") {	jQuery(".validation_alert").hide();	jQuery("#s_user_pass").show();	jQuery("#user_pass").focus();	return false;	}	/*	if( jQuery("#C_phone").val()=="") {		jQuery("#s_phone").text("This field is required");		jQuery("#us1").text("");		jQuery("#s_skype").text("");		jQuery("#s_mail").text("");		jQuery("#s_notes").text("");		jQuery("#C_phone").focus();		return false;	}		if(!jQuery.isNumeric(txtVal77)) {		jQuery("#s_phone").text("This field is required number");		jQuery("#us1").text("");		jQuery("#s_skype").text("");		jQuery("#s_mail").text("");		jQuery("#s_notes").text("");		jQuery("#C_phone").focus();		return false;	}	*/	if( jQuery("#C_email").val()=="") {		jQuery(".validation_alert").hide();		jQuery("#s_mail").show();		jQuery("#C_email").focus();		return false;	}		if (!ValidateEmail(jQuery("#C_email").val()))  {		jQuery(".validation_alert").hide();	 		jQuery("#s_valid_mail").show();		jQuery("#C_email").focus();		return false	}		/* if( jQuery("#C_skyp_id").val()=="") {		jQuery(".validation_alert").hide();				jQuery("#s_skype").show();		jQuery("#C_skyp_id").focus();		return false;	}	if( jQuery("#C_notes").val()=="") {		jQuery("#s_notes").show();		jQuery("#C_notes").focus();		return false;	}	*/	jQuery("#save_client_details").prop('disabled', true);	jQuery('#save_client_details').html('<i class="fa fa-spinner fa-spin"></i><?php _e("Saving","WL_A_P_SYSTEM"); ?> ');	  	jQuery.ajax({		url: location.href,		type: "POST",		data: jQuery("form#client_submit_form").serialize(),		dataType: "html",		cache: false,	//Do not cache the page		//success		success: function (html) {			jQuery("#save_client_details").prop('disabled', false);			jQuery('#save_client_details').html('<?php _e("Save","WL_A_P_SYSTEM"); ?>');			jQuery.notify("<?php _e("Customer Created Successfully",WL_A_P_SYSTEM ); ?>", {type:"success",icon:"check",align:"center", verticalAlign:"middle",color: "#3c763d", background: "#dff0d8"});			jQuery('form#client_submit_form')[0].reset();			jQuery('div#add-customer').modal('hide');			jQuery("#appoint_customer").load(location.href + " #appoint_customer");			jQuery('#example').DataTable().ajax.reload(null, false);			// fetch customer on calendar model			jQuery( "div#calendar_cust" ).empty();			jQuery.ajax({				data:"data",				url:ajaxurl+'?action=calendar_customer_ajax_request', 				type:"POST",				success:function(data) {					jQuery( "div#calendar_cust" ).html(data);				}			});			// fetch customer on calendar filter			 			/*			jQuery( "div#client_filter" ).empty();			jQuery.ajax({				data:"data",				url:ajaxurl+'?action=calendar_customer_filter_ajax_request', 				type:"POST",				success:function(data) {					jQuery( "div#client_filter" ).html(data);				}			});			*/		}	});}jQuery(document).ready(function() {	var table = jQuery('#example').DataTable( {		stateSave: true,		responsive: true,		ajax: ajaxurl + '?action=fn_my_ajaxified_dataloader_ajax',		"aoColumnDefs" : [			{ 'bSortable' : false, className: 'all', 'aTargets' : ['nosort'],},			{ className: 'all', orderable: true, targets:['sh_ow'] }		],		"language": {			"loadingRecords": "No Customer Add"		},	});});//fetch records on  modeljQuery(document).ready(function(){	jQuery('#ab_update_customer_dialog').on('show.bs.modal', function (e) {		var rowid = jQuery(e.relatedTarget).data('id');		jQuery.ajax({			type : 'post',			url : ajaxurl+'?action=example_ajax_request',  			data :  'user_info='+ rowid, //Pass $id			success : function(data){				jQuery('#ap_fetch_record').html(data);				jQuery(".phone").intlTelInput();				//console.log(data);			}		});	});});//Update customerfunction Update_client() {	function ValidateEmail(email)  {		var expr = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;		return expr.test(email);	};	function ValidateString(str) {		var expr = /^[A-Za-z]+$/;		return expr.test(str);	};	var txtVal77 = jQuery('#u_C_phone').val();	if( jQuery("#u_username").val()=="") {		jQuery(".validation_alert").hide();  		jQuery("#u_c1").show();		jQuery("#u_username").focus();		return false;	}		/*	if( jQuery("#u_C_phone").val()=="") {		jQuery("#c_phone").show();		jQuery("#u_C_phone").focus();		return false;	}	if(!jQuery.isNumeric(txtVal77)) {		jQuery("#c_phone").show();		jQuery("#u_C_phone").focus();		return false;	}	*/	if( jQuery("#u_C_email").val()=="") {		jQuery(".validation_alert").hide();		jQuery("#c_mail").show();		jQuery("#u_C_email").focus();		return false;	}		if (!ValidateEmail(jQuery("#u_C_email").val()))  {		jQuery(".validation_alert").hide();		jQuery("#c_valid_mail").show();		jQuery("#u_C_email").focus();		return false	}	/*if( jQuery("#u_C_skyp_id").val()=="") {		jQuery(".validation_alert").hide(); 		jQuery("#c_s_skype").show();		jQuery("#u_C_skyp_id").focus();		return false;	}		if( jQuery("#u_C_notes").val()=="") {		jQuery(".validation_alert").hide();  		jQuery("#c_notes").show();		jQuery("#u_C_notes").focus();		return false;	}*/	jQuery("#update_client_details").prop('disabled', true);	jQuery('#update_client_details').html('<i class="fa fa-spinner fa-spin"></i> <?php _e("Updating","WL_A_P_SYSTEM"); ?>');	jQuery.ajax({		url: location.href,		type: "POST",		data: jQuery("form#client_update_form").serialize(),		dataType: "html",		cache: false,	//Do not cache the page		success: function (html) { //success			jQuery("#update_client_details").prop('disabled', false);			jQuery('#update_client_details').html('<?php _e("Update","WL_A_P_SYSTEM"); ?>');			jQuery.notify("<?php _e("Customer Update Successfully",WL_A_P_SYSTEM ); ?>", {type:"success",icon:"check",align:"center", verticalAlign:"middle",color: "#3c763d", background: "#dff0d8"});			jQuery('form#client_update_form')[0].reset();			jQuery('div#ab_update_customer_dialog').modal('hide');			jQuery('#example').DataTable().ajax.reload(null, false);			jQuery( "div#calendar_cust" ).empty();			jQuery.ajax({				data:"data",				url:ajaxurl+'?action=calendar_customer_ajax_request', 				type:"POST",				success:function(data) {					jQuery( "div#calendar_cust" ).html(data);				}			});		}	});}//single deletejQuery(document).on("click", '.del_id', function (event) {	var d_id = jQuery(this).attr('href');	var res = d_id.substring(1);	jQuery.confirm({		title: '<?php _e("Please Confirm","WL_A_P_SYSTEM"); ?>',		theme: 'black',		content: '<?php _e("Are you sure to Delete Customer?","WL_A_P_SYSTEM"); ?>',		animation: 'rotate',		closeAnimation: 'rotateXR',		icon: 'fa fa-check-square-o',		confirmButton: '<?php _e("Delete","WL_A_P_SYSTEM"); ?>',		cancelButton: '<?php _e("Cancel","WL_A_P_SYSTEM"); ?>',		confirm: function () {			jQuery.ajax({				data:"single_id="+res,				url: location.href,				type:"POST",				success:function(data) {					jQuery.notify("<?php _e("Customer Delete Successfully",WL_A_P_SYSTEM ); ?>", {type:"success",icon:"check",align:"center", verticalAlign:"middle",color: "#3c763d", background: "#dff0d8"}); 					jQuery("#appoint_customer").load(location.href + " #appoint_customer");					jQuery('#example').DataTable().ajax.reload(null, false);					jQuery('#example').DataTable().ajax.reload(null, false);					jQuery( "div#calendar_cust" ).empty();					jQuery.ajax({						data:"data",						url:ajaxurl+'?action=calendar_customer_ajax_request', 						type:"POST",						success:function(data) {							jQuery( "div#calendar_cust" ).html(data);						}					});				}			})		},	});});// multiple deletejQuery(function(){	jQuery("a.delete").click(function(){		ids = new Array();		a = 0;		jQuery("#my_check:checked").each(function(i){			ids[i]=jQuery(this).val();		})		jQuery.confirm({			title: '<?php _e("Please Confirm","WL_A_P_SYSTEM"); ?>',			theme: 'black',			content: '<?php _e("Are you sure to Delete Customer?","WL_A_P_SYSTEM"); ?>',			animation: 'rotate',			closeAnimation: 'rotateXR',			icon: 'fa fa-check-square-o',			confirmButton: '<?php _e("Delete","WL_A_P_SYSTEM"); ?>',			cancelButton: '<?php _e("Cancel","WL_A_P_SYSTEM"); ?>',			confirm: function () {				jQuery("#delete_appt_client").prop('disabled', true);				jQuery('#delete_appt_client').html('<i class="fa fa-spinner fa-spin"></i><?php _e("Deleting","WL_A_P_SYSTEM"); ?>');							jQuery.ajax({					data:"id="+ids,					url: location.href,					type:"POST",					success:function(res) {						jQuery("#delete_appt_client").prop('disabled', false);						jQuery('#delete_appt_client').html('<?php _e("Delete","WL_A_P_SYSTEM"); ?>');						jQuery.notify("<?php _e("Customer Delete Successfully",WL_A_P_SYSTEM ); ?>", {type:"success",icon:"check",align:"center", verticalAlign:"middle",color: "#3c763d", background: "#dff0d8"});						jQuery("#appoint_customer").load(location.href + " #appoint_customer");						jQuery('#example').DataTable().ajax.reload(null, false);						jQuery('input[type=checkbox]').attr('checked',false); 						jQuery('#example').DataTable().ajax.reload(null, false);						jQuery( "div#calendar_cust" ).empty();						jQuery.ajax({							data:"data",							url:ajaxurl+'?action=calendar_customer_ajax_request', 							type:"POST",							success:function(data) {								jQuery( "div#calendar_cust" ).html(data);							}						});						if(res==1) {							jQuery("#my_check:checked").each(function(){								jQuery(this).parent.remove();							})						}					}				})			},		});		return false;	})});</script><?phpglobal $wpdb;//insert customerif(isset($_REQUEST['C_email'])) {	$first_name = sanitize_text_field( $_REQUEST['first_name'] );	$last_name = sanitize_text_field( $_REQUEST['last_name'] );	$C_phone = sanitize_text_field( $_REQUEST['C_phone'] );	$C_skyp_id = sanitize_text_field( $_REQUEST['C_skyp_id'] );	$C_email = sanitize_text_field( $_REQUEST['C_email'] );	$C_notes = sanitize_text_field( $_REQUEST['C_notes'] );	$user_pass = sanitize_text_field( $_REQUEST['user_pass'] );	$wpdb->insert(		$wpdb->prefix.'apt_clients',		array(			'first_name' => $first_name,			'last_name' => $last_name,			'phone' => $C_phone,			'skype_id' => $C_skyp_id,			'email' => $C_email,			'notes' => $C_notes,		)	);	$user_data = array(		'user_pass' => $user_pass,		'user_email' => $C_email,		'user_login' => $C_email,		'role' => 'subscriber' // Use default role or another role, e.g. 'editor'	);	$user_id = wp_insert_user( $user_data );	add_action( 'admin_init', 'wp_insert_user' );}//update customerif(isset($_REQUEST['u_C_phone'])) {	$u_use_id = sanitize_text_field( $_REQUEST['u_use_id'] ); 	$u_first_name = sanitize_text_field( $_REQUEST['u_first_name'] );	$u_last_name = sanitize_text_field( $_REQUEST['u_last_name'] );	$u_C_phone = sanitize_text_field( $_REQUEST['u_C_phone'] );	$u_C_skyp_id = sanitize_text_field( $_REQUEST['u_C_skyp_id'] );	$u_C_email = sanitize_text_field( $_REQUEST['u_C_email'] );	$u_C_notes = sanitize_text_field( $_REQUEST['u_C_notes'] );	$wpdb->update( $wpdb->prefix.'apt_clients',array('first_name'=>$u_first_name,'last_name'=>$u_last_name,'phone'=>$u_C_phone,'skype_id'=>$u_C_skyp_id,'email'=>$u_C_email,'notes'=>$u_C_notes),array( 'id'=>$u_use_id ));	/*$user = get_user_by( 'email',$u_C_email);	//print_r($user);	$user_id = $user->ID;	if(isset( $_REQUEST['u_user_pass'])) {$user_pass = $_REQUEST['u_user_pass'];} 	$user_login= $_REQUEST['u_u_ser_name']; 	$wpdb->update($wpdb->users, array('user_pass'=>MD5($user_pass),'user_login' =>$user_login), array('ID' => $user_id));*/}//single deleteif(isset($_REQUEST['single_id'])) {	$del=$_REQUEST['single_id'];	$wpdb->delete( $wpdb->prefix.'apt_clients', array( 'id' => $del ));}// multi deleteif(isset($_REQUEST['id'])) { 	$id_array = sanitize_text_field($_REQUEST['id']);	$arr = explode(',',$id_array);	echo $id_count = count($arr);	for($i=0;$i<=$id_count;$i++) { 		$del=$arr[$i];		$wpdb->delete( $wpdb->prefix.'apt_clients', array( 'id' =>$del ) );		$wpdb->show_errors();		$wpdb->print_error();	}}?><div class="panel panel-default">	<div class="panel-heading"><i class="fa fa-users"></i><span class="panel_heading"><?php _e('Customer',WL_A_P_SYSTEM); ?></span> 		<div class="theme-export">			<button type="button" class="btn theme-customer add-customer" data-toggle="modal" data-target="#add-customer"><i class="fa fa-user-plus" aria-hidden="true"></i><?php _e(' Add Customer',WL_A_P_SYSTEM); ?></button>			<a class="btn theme-customer"  href="<?php echo plugins_url('customer-all-csv.php', __FILE__ ); ?>"><?php _e('Print All',WL_A_P_SYSTEM); ?></a>		</div>	</div>		<div class="panel-body">		<div class="theme-add-customer">			<div class="modal fade" id="add-customer" role="dialog">				<div class="modal-dialog">					<!-- Modal content-->					<div class="modal-content">						<div class="modal-header">							<h4 class="modal-title"><?php _e('Add Customer',WL_A_P_SYSTEM); ?></h4>						</div>						<div class="col-md-12 col-sm-12 col-xs-12 modal-body">							<div class="form-group">								<form method="POST" id="client_submit_form" name="client_submit_form">								<div class="col-md-12 col-sm-12 col-xs-12 cus-register">									<label><?php _e('Customer First Name:',WL_A_P_SYSTEM); ?></label>									<input class="form-control" type="text"  id="first_name" name="first_name" >									<span class="validation_alert"  id="us1"><?php _e('This field is required',WL_A_P_SYSTEM); ?></span>								</div>								<div class="col-md-12 col-sm-12 col-xs-12 cus-register">									<label><?php _e('Customer Last Name:',WL_A_P_SYSTEM); ?> </label>									<input class="form-control" type="text"  id="last_name" name="last_name" >									<span class="validation_alert"  id="us1"><?php _e('This field is required',WL_A_P_SYSTEM); ?></span>								</div>								<div class="col-md-6 col-sm-12 col-xs-12 cus-register">									<label><?php _e('Password:',WL_A_P_SYSTEM); ?></label>									<input class="form-control " type="password"  id="user_pass" name="user_pass">									<span class="validation_alert"  id="s_user_pass"><?php _e('This field is required',WL_A_P_SYSTEM); ?></span>								</div>								<div class="col-md-6 col-sm-12 col-xs-12 cus-register">									<label><?php _e('Phone No:',WL_A_P_SYSTEM); ?></label>									<input class="form-control phone"  type="tel"  id="C_phone" name="C_phone" placeholder="Phone No."  >									<span class="validation_alert"  id="s_phone"><?php _e('This field is required',WL_A_P_SYSTEM); ?></span>								</div>								<div class="col-md-12 col-sm-12 col-xs-12 cus-register">									<label><?php _e('Email Id:',WL_A_P_SYSTEM); ?></label>									<input class="form-control " type="text"  id="C_email" name="C_email">									<span class="validation_alert"  id="s_mail"><?php _e('This field is required',WL_A_P_SYSTEM); ?></span>									<span class="validation_alert"  id="s_valid_mail"><?php _e('Invalid email',WL_A_P_SYSTEM); ?></span>								</div>								<div class="col-md-12 col-sm-12 col-xs-12 cus-register">									<label><?php _e('Skype Id:',WL_A_P_SYSTEM); ?> </label>									<input class="form-control" type="text"  id="C_skyp_id" name="C_skyp_id" placeholder="Skyp Id"  >									<span class="validation_alert"  id="s_skype"><?php _e('This field is required',WL_A_P_SYSTEM); ?></span>								</div>								<div class="col-md-12 col-sm-12 col-xs-12 cus-register">									<label for="notes"><?php _e('Special Notes',WL_A_P_SYSTEM); ?></label>									<textarea class="form-control "  id="C_notes" name="C_notes"></textarea>									<span class="validation_alert"  id="s_notes"><?php _e('This field is required',WL_A_P_SYSTEM); ?></span>								</div>							</div>						</div>						<div class="modal-footer">							<button type="button" id='save_client_details' onclick="return Save_client();" class="btn btn-info"><?php _e('Save',WL_A_P_SYSTEM); ?></button>							<button type="button" class="btn btn-default" data-dismiss="modal"><?php _e('Cancel',WL_A_P_SYSTEM); ?></button>								</form>						</div>					</div>				</div>			</div>						<div class="modal fade" id="ab_update_customer_dialog" role="dialog">				<div class="modal-dialog" >					<!-- Modal content-->					<div class="modal-content" >						<div class="modal-header">							<h4 class="modal-title"><?php _e('Edit Customer',WL_A_P_SYSTEM); ?></h4>						</div>						<div id="ap_fetch_record"></div>					</div>				</div>			</div>		</div>				<div id="mydiv" class="table-responsive">			<form method="post" id="multi_del" name="multi_del" >				<table  id="example" class="display" cellspacing="0" width="100%">					<thead>						<tr>							<th style="padding: 10px 12px;" class="nosort"><input type="checkbox" name="selec_tall_c" id="selec_tall_c" value=""></th>							<th class="sh_ow"><?php _e('First Name',WL_A_P_SYSTEM); ?></th>							<th><?php _e('Last Name',WL_A_P_SYSTEM); ?> </th>							<th><?php _e('Phone',WL_A_P_SYSTEM); ?></th>							<th><?php _e('Skype Id',WL_A_P_SYSTEM); ?></th>							<th><?php _e('Email',WL_A_P_SYSTEM); ?></th>							<th><?php _e('Notes',WL_A_P_SYSTEM); ?> </th>							<th class="nosort" ><?php _e('Action',WL_A_P_SYSTEM); ?></th>						</tr>					</thead>				</table>				<a href="#" id='delete_appt_client' class="delete btn btn-link"><i class="fa fa-trash-o" aria-hidden="true"></i><?php _e(' Delete',WL_A_P_SYSTEM); ?></a></td>			</form>		</div>	</div></div>