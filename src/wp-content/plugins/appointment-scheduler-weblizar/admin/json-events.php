<?phpglobal $wpdb;$appointment_staff_details = $wpdb->get_results( "SELECT * from $wpdb->prefix"."apt_staff");$ap_fecth_appointment=$wpdb->get_results("SELECT * from $wpdb->prefix"."apt_appointments");$appointment_category_details = $wpdb->get_results( "SELECT * from $wpdb->prefix"."apt_category");$appointment_customer_details = $wpdb->get_results( "SELECT * from $wpdb->prefix"."apt_clients");$appearence_cal_settings = $wpdb->get_row( "SELECT * from  $wpdb->prefix"."apt_settings"); $pending_color= $appearence_cal_settings->cal_pending_color;$approved_color= $appearence_cal_settings->cal_approved_color;$cancelled_color= $appearence_cal_settings->cal_cancelled_color;$completed_color= $appearence_cal_settings->cal_completed_color;$off_time_color= $appearence_cal_settings->cal_off_time_color;echo "[";	foreach($ap_fecth_appointment as $value) {		// fetch record for none		if($value->repeat_appointment=="Non") {			//$bg_colors=array('#a54f9a','#606ca7','#6e7932','#90786f', '#bb7a7a','#8a3e98','#3193a9','#31a97d','#90740e','#838f98','#4a7396','#a95143','#a98043');				//shuffle($bg_colors);			if($value->status=='cancelled') { $bg_colors=$cancelled_color; }			if($value->status=='pending') { $bg_colors=$pending_color; }			if($value->status=='approved') { $bg_colors=$approved_color; }			if($value->status=='completed') { $bg_colors=$completed_color; }			$j=$value->id[$i++];			if($j==$value->id){ echo $k=""; } else { echo $k=","; }			echo '{"id":'.$value->id.',"title":"'.$value->client_name.'","start":"'.$value->booking_date.'","end":"'.$value->booking_date.'","backgroundColor":"'.$bg_colors.'","staff_member":"'.$value->staff_member.'","service_type":"'.$value->service_type.'","booking_date":"'.$value->booking_date.'","status":"'.$value->status.'",			"details":"<div class=row><div class=col-md-12><label for=edit_client_name>Name</label>';			echo '<select id=edit_client_name value='.$value->client_name.' name=edit_client_name class=form-control ><option value=0>'.__("Select Customer",WL_A_P_SYSTEM ).'</option>';			foreach($appointment_customer_details as $appointment_customer_single_detail) {				$n=$appointment_customer_single_detail->first_name.' '.$appointment_customer_single_detail->last_name;				echo '<option value=';				echo "'$n'";				if($n == $value->client_name) { echo "selected='selected'"; }				echo ">";				echo $n;			}			echo '</option></select><span class=validation_alert id=edit_cal_customer_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>';			echo '</div><div class=col-md-6 form-group>';				echo '</div></div> <div class=row><div class=col-md-6 form-group><label for=edit_service_type>Services</label>';			echo '<select class=form-control name=edit_service_type id=edit_service_type><option value=0 selected=selected>-- Select a service --</option>';			foreach($appointment_category_details as $appointment_category_single_detail) {				echo "<optgroup label='$appointment_category_single_detail->name'>";				$service_table=$wpdb->prefix."apt_services";				$appointment_details = $wpdb->get_results( "SELECT * from $service_table where category= '$appointment_category_single_detail->id'");  				foreach($appointment_details as $appointment_single_detail){				echo "<option value='$appointment_single_detail->name'";				if($appointment_single_detail->name == $value->service_type) { echo "selected='selected'"; }					echo ">";					echo $appointment_single_detail->name;					echo '</option>';				}				echo '</optgroup>';			}			echo'</select><span class=validation_alert id=edit_cal_service_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>'; 			echo'</div><div  class=col-md-6  ><label for=edit_contact>'.__("Contact No.",WL_A_P_SYSTEM ).'</label><input type=tel id=edit_contact value='. $value->contact.' class=form-control phone name=edit_contact ></div></div><div class=row><div class=col-md-6 form-group><label for=edit_booking_date>Date</label><input id=edit_booking_date name=edit_booking_date type=text value='.$value->booking_date.' class=form-control><span class=validation_alert id=edit_booking_date_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6 form-group><label for=edit_start_time>Start Time</label><div class=clockpicker data-placement=left data-align=top data-autoclose=true><input type=text name=edit_start_time id=edit_start_time value='.$value->start_time.'  placeholder=Time class=form-control></div><span class=validation_alert id=edit_cal_start_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div></div> <div class=row><div class=col-md-6 form-group><label for=edit_end_time>End Time</label><div class=clockpicker data-placement=left data-align=top data-autoclose=true><input type=text name=edit_end_time id=edit_end_time value='.$value->end_time.'  placeholder=Time  class=form-control></div> <span class=validation_alert id=edit_cal_end_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6><label for=edit_status>Edit Status</label>';			echo "<select id=edit_status class=form-control name=edit_status ><option value=0>Select Status</option>";			echo "<option value=pending ";						if($value->status=="pending") { echo "selected='selected'"; }			echo ">Pending</option>";			echo "<option value=approved ";  						if($value->status=="approved") { echo "selected='selected'"; }			echo ">Approved</option>";			echo "<option value=cancelled ";  						if($value->status=="cancelled") { echo "selected='selected'"; }			echo ">Cancelled</option>";			echo "<option value=completed ";  						if($value->status=="completed") {echo "selected='selected'";}			echo ">Completed</option></select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";			echo'<input id=edit_client_id value='.$value->id.' name=edit_client_id  type=hidden> </div><div class=col-md-12 id=payment_hide> <label for=payment_status>'.__("Payment Status", WL_A_P_SYSTEM ).'</label>';			echo "<select id=edit_payment_status class=form-control name=edit_payment_status ><option value=0>'.__('Select Status',WL_A_P_SYSTEM ).'</option>";			echo "<option value=pending ";						if($value->payment_status=="pending") { echo "selected='selected'"; }			echo ">Pending</option>";			echo "<option value=approved ";  						if($value->payment_status=="approved") { echo "selected='selected'"; }			echo ">Approved</option>";			echo"</select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";			echo'</div><div class=col-md-12> <div><strong>Repeat:</strong></div>Repeat Feature available in Pro Version</div></div></div>",			"event_hover":"<table class=form-table  border=0>';			echo '<tr><td class=hover_border_remove>'.__("Staff Member",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>';			foreach($appointment_staff_details as $staff_member_single_name)  {				if($value->staff_member==$staff_member_single_name->id) { 					echo $staff_member_single_name->staff_member_name;				}			} 			echo'</td></tr>';			echo '<tr><td class=hover_border_remove>'.__("Services",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->service_type.'</td></tr> <tr><td class=hover_border_remove>'.__("Contact No",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->contact.'</td>';			echo '<tr><td class=hover_border_remove>'.__("Date",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>';			$date_format=date("Y-M-d", strtotime($value->booking_date)); 			echo $date_format;			echo '</td></tr>';			echo '<tr><td class=hover_border_remove>'.__("Start Time",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->start_time.'</td></tr><tr><td class=hover_border_remove>'.__("End Time",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->end_time.'</td></tr><tr><td class=hover_border_remove>'.__("Status",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->status.'</td></tr> </table>"}';		}		// fetch record for daily		if($value->repeat_appointment=="daily") {			$dayz = $value->re_days;			for($y=0;$y<=$dayz;$y++) {				$date_format=date("Y-m-d", strtotime('+'.$y.' days', strtotime($value->booking_date)));  				$dateTo=$date_format ;				//$bg_colors = array('#a54f9a','#606ca7','#6e7932','#90786f', '#bb7a7a','#8a3e98','#3193a9','#31a97d','#90740e','#838f98','#4a7396','#a95143','#a98043');					//shuffle($bg_colors);				if($value->status=='cancelled') { $bg_colors=$cancelled_color; }				if($value->status=='pending') { $bg_colors=$pending_color; }				if($value->status=='approved') { $bg_colors=$approved_color; }				$j = $value->id[$i++];				if($j == $value->id) { echo $k=""; } else { echo $k=","; }				echo '{"id":'.$value->id.',"title":"'.$value->client_name.'","start":"'.$dateTo.'","end":"'.$dateTo.'","backgroundColor":"'.$bg_colors.'","staff_member":"'.$value->staff_member.'","service_type":"'.$value->service_type.'","booking_date":"'.$dateTo.'","status":"'.$value->status.'",				"details":"<div class=row><div class=col-md-6><label for=edit_client_name>'.__("Name",WL_A_P_SYSTEM ).'</label>';				echo '<select id=edit_client_name value='.$value->client_name.' name=edit_client_name class=form-control ><option value=0>'.__("Select Customer",WL_A_P_SYSTEM ).'</option>';				foreach($appointment_customer_details as $appointment_customer_single_detail)  {					$n=$appointment_customer_single_detail->first_name.' '.$appointment_customer_single_detail->last_name;					echo '<option value=';					echo "'$n'";					if($n==$value->client_name) { echo "selected='selected'"; }					echo">";					echo $n;				}				echo '</option></select><span class=validation_alert id=edit_cal_customer_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>';				echo '</div><div class=col-md-6 form-group><label for=edit_staff_member>'.__("Staff Member",WL_A_P_SYSTEM ).'</label>'; 				echo '<select id=edit_staff_member class=form-control name=edit_staff_member > <option value=0>'.__("Select Staff",WL_A_P_SYSTEM ).'</option>';				foreach($appointment_staff_details as $appointment_staff_single_detail){					echo "<option value='$appointment_staff_single_detail->id'";					if($appointment_staff_single_detail->id==$value->staff_member) { echo "selected='selected'"; }					echo">";					echo $appointment_staff_single_detail->staff_member_name;				}							echo '</option></select><span class=validation_alert id=edit_cal_staff_alert>'. __("Please select one",WL_A_P_SYSTEM ).'</span>';					echo '</div></div><div class=row><div class=col-md-6 form-group><label for=edit_service_type>Services</label>';				echo '<select class=form-control name=edit_service_type id=edit_service_type><option value=0 selected=selected>-- Select a service --</option>';				foreach($appointment_category_details as $appointment_category_single_detail) {					echo "<optgroup label='$appointment_category_single_detail->name'>";					$service_table=$wpdb->prefix."apt_services";					$appointment_details = $wpdb->get_results( "SELECT * from $service_table where category= '$appointment_category_single_detail->id'");  					foreach($appointment_details as $appointment_single_detail) {						echo "<option value='$appointment_single_detail->name'";						if($appointment_single_detail->name==$value->service_type) { echo "selected='selected'"; } 						echo">";						echo $appointment_single_detail->name; 						echo '</option>';					}					echo '</optgroup>';				}				echo '</select><span class=validation_alert id=edit_cal_service_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>'; 				echo '</div><div class=col-md-6 ><label for=edit_contact>Contact No.</label><input type=tel id=edit_contact value='. $value->contact.' class=form-control phone name=edit_contact ></div></div><div class=row><div class=col-md-6 form-group><label for=edit_booking_date>Date</label><input id=edit_booking_date name=edit_booking_date type=text value='.$value->booking_date.' class=form-control><span class=validation_alert id=edit_booking_date_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6 form-group><label for=edit_start_time>Start Time</label><input type=text name=edit_start_time id=edit_start_time value='.$value->start_time.'  placeholder=Time class=form-control><span class=validation_alert id=edit_cal_start_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div></div> <div class=row><div class=col-md-6 form-group><label for=edit_end_time>'.__("End Time",WL_A_P_SYSTEM ).'</label><input type=text name=edit_end_time id=edit_end_time value='.$value->end_time.'  placeholder=Time  class=form-control> <span class=validation_alert id=edit_cal_end_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6><label for=edit_status>Edit Status</label>';				echo "<select id=edit_status class=form-control name=edit_status ><option value=0>Select Status</option>";				echo "<option value=pending ";								if($value->status == "pending") { echo "selected='selected'"; }				echo ">Pending</option>";				echo "<option value=approved ";  								if($value->status == "approved") { echo "selected='selected'"; }				echo ">Approved</option>";				echo "<option value=cancelled ";  								if($value->status == "cancelled") { echo "selected='selected'"; }				echo ">Cancelled</option></select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";				echo'<input id=edit_client_id value='.$value->id.' name=edit_client_id  type=hidden> </div><div class=col-md-12 id=payment_hide> <label for=payment_status>'.__("Payment Status", WL_A_P_SYSTEM ).'</label>';				echo "<select id=edit_payment_status class=form-control name=edit_payment_status ><option value=0>Select Status</option>";				echo "<option value=pending ";								if($value->payment_status == "pending") {echo "selected='selected'"; }				echo ">Pending</option>";				echo "<option value=approved ";  								if($value->payment_status == "approved") {echo "selected='selected'"; }				echo ">Approved</option>";				echo"</select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";				echo'</div><div class=col-md-12> <div><strong>Repeat:</strong></div><input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment == "Non") {echo "checked='checked'";}				echo 'value=Non onclick=hideAll();> <span class=Nclr style=color:#FE0000;>None</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="daily") {echo "checked='checked'";}				echo'value=daily onclick=showdaily();> <span id=Dclr>Daily</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="weekly") {echo "checked='checked'";}				echo 'value=weekly onclick=showweekly()> <span class=Wclr>Weekly</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="monthly") {echo "checked='checked'";}				echo 'value=monthly onclick=showmonthly()> <span class=Mclr>Monthly</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="PD") {echo "checked='checked'";}				echo 'value=PD onclick=showParticularDate()> <span class=PDclr>Particular Dates</span><div class=dailydiv name=dailydiv  style=display:none;><br><strong>Daily(s):</strong><input name=re_days_cl id=re_days type=text style=width:40px;  maxlength=2  value='.$value->re_days.'> (Min = 1, Max = 99 Days)</div><div class=weeklydiv name=weeklydiv style=display:none;><br><strong>Repeat Week(s):</strong><input name=re_weeks_cl id=re_weeks type=text style=width:40px;  maxlength=2 value='.$value->re_weeks.'>(Min = 1, Max = 99 Weeks)</div><div class=monthlydiv style=display:none;><br><strong>Repeat Month(s):</strong><input name=re_months_cl id=re_months type=text style=width:40px;  maxlength=2  value='.$value->re_months.'>(Min = 1, Max = 99 Months)</div><div class=PDdiv style=display:none;><br><strong>Start Date:</strong><input name=re_start_date_cl id=re_start_date_cl type=text value='.$value->re_start_date.'><br><br><strong>End Date:</strong> <input name=re_end_date_cl id=re_end_date_cl type=text value='.$value->re_end_date.'></div></div></div>",				"event_hover":"<table class=form-table  border=0>';				echo '<tr><td class=hover_border_remove>Staff Member</td><td class=hover_border_remove>';				foreach($appointment_staff_details as $staff_member_single_name )  {					if($value->staff_member==$staff_member_single_name->id) { 						echo $staff_member_single_name->staff_member_name;					}				} 				echo '</td></tr>';				echo '<tr><td class=hover_border_remove>Services </td><td class=hover_border_remove>'.$value->service_type.'</td></tr> <tr><td class=hover_border_remove>'.__("Contact No.",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->contact.'</td>';				echo '<tr><td class=hover_border_remove>Date</td><td class=hover_border_remove>';				$date_format=date("Y-M-d", strtotime($value->booking_date)); 				echo $date_format;				echo '</td></tr>';				echo '<tr><td class=hover_border_remove>Start Time </td><td class=hover_border_remove>'.$value->start_time.'</td></tr><tr><td class=hover_border_remove>'.__("End Time",WL_A_P_SYSTEM ).' </td><td class=hover_border_remove>'.$value->end_time.'</td></tr><tr><td class=hover_border_remove>Status </td><td class=hover_border_remove>'.$value->status.'</td></tr> </table>"}';			}		}		// fetch record for weekly		if($value->repeat_appointment=="weekly") {			$weekz=$value->re_weeks;		 			for($h=0;$h<=$weekz;$h++) {				$date_format=date("Y-m-d", strtotime('+'.$h.' week', strtotime($value->booking_date)));  				$dateTo=$date_format; 				//$bg_colors=array('#a54f9a','#606ca7','#6e7932','#90786f', '#bb7a7a','#8a3e98','#3193a9','#31a97d','#90740e','#838f98','#4a7396','#a95143','#a98043');					//shuffle($bg_colors);				if($value->status=='cancelled') { $bg_colors=$cancelled_color; }				if($value->status=='pending') { $bg_colors=$pending_color; }				if($value->status=='approved') { $bg_colors=$approved_color; }				$j = $value->id[$i++];				if($j==$value->id){ echo $k=""; } else { echo $k=",";}				echo '{"id":'.$value->id.',"title":"'.$value->client_name.'","start":"'.$dateTo.'","end":"'.$dateTo.'","backgroundColor":"'.$bg_colors.'","staff_member":"'.$value->staff_member.'","service_type":"'.$value->service_type.'","booking_date":"'.$dateTo.'","status":"'.$value->status.'",				"details":"<div class=row><div class=col-md-6><label for=edit_client_name>Name</label>';				echo '<select id=edit_client_name value='.$value->client_name.' name=edit_client_name class=form-control ><option value=0>Select Customer</option>';				foreach($appointment_customer_details as $appointment_customer_single_detail) {					$n=$appointment_customer_single_detail->first_name.' '.$appointment_customer_single_detail->last_name;					echo '<option value=';					echo "'$n'";					if($n==$value->client_name) { echo "selected='selected'"; }					echo ">";					echo $n;				}				echo '</option></select><span class=validation_alert id=edit_cal_customer_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>';				echo '</div><div class=col-md-6 form-group><label for=edit_staff_member>Staff Member</label>'; 				echo '<select id=edit_staff_member class=form-control name=edit_staff_member > <option value=0>Select Staff</option>';				foreach($appointment_staff_details as $appointment_staff_single_detail) {					echo "<option value='$appointment_staff_single_detail->id'";					if($appointment_staff_single_detail->id==$value->staff_member) { echo "selected='selected'"; }					echo ">";					echo $appointment_staff_single_detail->staff_member_name;				}				echo '</option></select><span class=validation_alert id=edit_cal_staff_alert>'. __("Please select one",WL_A_P_SYSTEM ).'</span>';					echo '</div></div><div class=row><div class=col-md-6 form-group><label for=edit_service_type>Services</label>';				echo '<select class=form-control name=edit_service_type id=edit_service_type><option value=0 selected=selected>-- Select a service --</option>';				foreach($appointment_category_details as $appointment_category_single_detail) {					echo "<optgroup label='$appointment_category_single_detail->name'>";					$service_table=$wpdb->prefix."apt_services";					$appointment_details = $wpdb->get_results( "SELECT * from $service_table where category= '$appointment_category_single_detail->id'");  					foreach($appointment_details as $appointment_single_detail) {						echo "<option value='$appointment_single_detail->name'";						if($appointment_single_detail->name==$value->service_type) { echo "selected='selected'"; } 						echo">";						echo $appointment_single_detail->name; 						echo '</option>';					}					echo '</optgroup>';				}								echo'</select><span class=validation_alert id=edit_cal_service_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>'; 				echo'</div><div  class=col-md-6><label for=edit_contact>Contact No.</label><input type=tel id=edit_contact value='. $value->contact.' class=form-control phone name=edit_contact ></div></div><div class=row><div class=col-md-6 form-group><label for=edit_booking_date>Date</label><input id=edit_booking_date name=edit_booking_date type=text value='.$value->booking_date.' class=form-control><span class=validation_alert id=edit_booking_date_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6 form-group><label for=edit_start_time>Start Time</label><input type=text name=edit_start_time id=edit_start_time value='.$value->start_time.'  placeholder=Time class=form-control><span class=validation_alert id=edit_cal_start_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div></div> <div class=row><div class=col-md-6 form-group><label for=edit_end_time>'.__("End Time",WL_A_P_SYSTEM ).'</label><input type=text name=edit_end_time id=edit_end_time value='.$value->end_time.'  placeholder=Time  class=form-control> <span class=validation_alert id=edit_cal_end_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6><label for=edit_status>Edit Status</label>';				echo "<select id=edit_status class=form-control name=edit_status ><option value=0>Select Status</option>";				echo "<option value=pending ";								if($value->status=="pending") { echo "selected='selected'"; }				echo ">Pending</option>";				echo "<option value=approved ";  								if($value->status=="approved") { echo "selected='selected'"; }				echo ">Approved</option>";				echo "<option value=cancelled ";								if($value->status=="cancelled") { echo "selected='selected'"; }				echo ">Cancelled</option></select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";				echo '<input id=edit_client_id value='.$value->id.' name=edit_client_id  type=hidden> </div><div class=col-md-12 id=payment_hide> <label for=payment_status>'.__("Payment Status", WL_A_P_SYSTEM ).'</label>';				echo "<select id=edit_payment_status class=form-control name=edit_payment_status ><option value=0>Select Status</option>";				echo "<option value=pending ";								if($value->payment_status == "pending") { echo "selected='selected'"; }				echo ">Pending</option>";				echo "<option value=approved ";  								if($value->payment_status == "approved") { echo "selected='selected'"; }				echo ">Approved</option>";				echo"</select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";				echo'</div><div class=col-md-12> <div><strong>'.__("Repeat",WL_A_P_SYSTEM ).':</strong></div><input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="Non") {echo "checked='checked'"; }				echo 'value=Non onclick=hideAll();> <span class=Nclr style=color:#FE0000;>'.__("Please select one",WL_A_P_SYSTEM ).'</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="daily") {echo "checked='checked'"; }				echo'value=daily onclick=showdaily();> <span id=Dclr>'.__("Daily",WL_A_P_SYSTEM ).'</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="weekly") {echo "checked='checked'"; }				echo 'value=weekly onclick=showweekly()> <span class=Wclr>'.__("Weekly",WL_A_P_SYSTEM ).'</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="monthly") {echo "checked='checked'"; }				echo 'value=monthly onclick=showmonthly()> <span class=Mclr>'.__("Monthly",WL_A_P_SYSTEM ).'</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="PD") {echo "checked='checked'"; }				echo 'value=PD onclick=showParticularDate()> <span class=PDclr>'.__("Particular Dates",WL_A_P_SYSTEM ).'</span><div class=dailydiv name=dailydiv  style=display:none;><br><strong>'.__("Daily(s)",WL_A_P_SYSTEM ).':</strong><input name=re_days_cl id=re_days type=text style=width:40px;  maxlength=2  value='.$value->re_days.'> (Min = 1, Max = 99 Days)</div><div class=weeklydiv name=weeklydiv style=display:none;><br><strong>Repeat Week(s):</strong><input name=re_weeks_cl id=re_weeks type=text style=width:40px;  maxlength=2 value='.$value->re_weeks.'>(Min = 1, Max = 99 Weeks)</div><div class=monthlydiv style=display:none;><br><strong>Repeat Month(s):</strong><input name=re_months_cl id=re_months type=text style=width:40px;  maxlength=2  value='.$value->re_months.'>(Min = 1, Max = 99 Months)</div><div class=PDdiv style=display:none;><br><strong>Start Date:</strong><input name=re_start_date_cl id=re_start_date_cl type=text value='.$value->re_start_date.'><br><br><strong>End Date:</strong> <input name=re_end_date_cl id=re_end_date_cl type=text value='.$value->re_end_date.'></div></div></div>",				"event_hover":"<table class=form-table  border=0>';				echo '<tr><td class=hover_border_remove>Staff Member</td><td class=hover_border_remove>';				foreach($appointment_staff_details as $staff_member_single_name)  {					if($value->staff_member==$staff_member_single_name->id) {						echo $staff_member_single_name->staff_member_name;					}				} 				echo '</td></tr>';				echo '<tr><td class=hover_border_remove>Services</td><td class=hover_border_remove>'.$value->service_type.'</td></tr> <tr><td class=hover_border_remove>'.__("Contact No",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->contact.'</td>';				echo '<tr><td class=hover_border_remove>Date</td><td class=hover_border_remove>';				$date_format = date("Y-M-d", strtotime($value->booking_date)); 				echo $date_format;				echo '</td></tr>';				echo '<tr><td class=hover_border_remove>'.__("Start Time",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->start_time.'</td></tr><tr><td class=hover_border_remove>'.__("End Time",WL_A_P_SYSTEM ).'</td><td class=hover_border_remove>'.$value->end_time.'</td></tr><tr><td class=hover_border_remove>Status </td><td class=hover_border_remove>'.$value->status.'</td></tr> </table>"}';			}		}		// fetch record for Monthly		if($value->repeat_appointment=="monthly") {			$monthz=$value->re_months;					 			for($s=0;$s<=$monthz;$s++) {				$date_format=date("Y-m-d", strtotime('+'.$s.'months', strtotime($value->booking_date)));  				$dateTo=$date_format; 				//$bg_colors=array('#a54f9a','#606ca7','#6e7932','#90786f', '#bb7a7a','#8a3e98','#3193a9','#31a97d','#90740e','#838f98','#4a7396','#a95143','#a98043');					//shuffle($bg_colors);				if($value->status=='cancelled') { $bg_colors=$cancelled_color; }				if($value->status=='pending')  { $bg_colors=$pending_color; }				if($value->status=='approved') { $bg_colors=$approved_color; }				$j=$value->id[$i++];				if($j==$value->id){ echo $k=""; } else{ echo $k=","; }				echo '{"id":'.$value->id.',"title":"'.$value->client_name.'","start":"'.$dateTo.'","end":"'.$dateTo.'","backgroundColor":"'.$bg_colors.'","staff_member":"'.$value->staff_member.'","service_type":"'.$value->service_type.'","booking_date":"'.$dateTo.'","status":"'.$value->status.'",				"details":"<div class=row><div class=col-md-6><label for=edit_client_name>Name</label>';				echo '<select id=edit_client_name value='.$value->client_name.' name=edit_client_name class=form-control ><option value=0>Select Customer</option>';				foreach($appointment_customer_details as $appointment_customer_single_detail) {					$n=$appointment_customer_single_detail->first_name.' '.$appointment_customer_single_detail->last_name;					echo '<option value=';					echo "'$n'";					if($n==$value->client_name) { echo "selected='selected'"; }					echo">";					echo $n;				}				echo'</option></select><span class=validation_alert id=edit_cal_customer_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>';				echo '</div><div class=col-md-6 form-group><label for=edit_staff_member>Staff Member</label>'; 				echo '<select id=edit_staff_member class=form-control name=edit_staff_member > <option value=0>Select Staff</option>';				foreach($appointment_staff_details as $appointment_staff_single_detail){ 				echo "<option value='$appointment_staff_single_detail->id'";				if($appointment_staff_single_detail->id==$value->staff_member) { echo "selected='selected'"; }				echo ">";				echo $appointment_staff_single_detail->staff_member_name;}echo'</option></select><span class=validation_alert id=edit_cal_staff_alert>'. __("Please select one",WL_A_P_SYSTEM ).'</span>';					echo '</div></div> <div class=row><div class=col-md-6 form-group><label for=edit_service_type>Services</label>';				echo '<select class=form-control name=edit_service_type id=edit_service_type><option value=0 selected=selected>-- Select a service --</option>';				foreach($appointment_category_details as $appointment_category_single_detail) {					echo "<optgroup label='$appointment_category_single_detail->name'>";					$service_table=$wpdb->prefix."apt_services";					$appointment_details = $wpdb->get_results( "SELECT * from $service_table where category= '$appointment_category_single_detail->id'");  					foreach($appointment_details as $appointment_single_detail) {						echo "<option value='$appointment_single_detail->name'";						if($appointment_single_detail->name==$value->service_type) { echo "selected='selected'";}						echo ">";						echo $appointment_single_detail->name; 						echo '</option>';					}					echo '</optgroup>';				}				echo '</select><span class=validation_alert id=edit_cal_service_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>'; 				echo '</div><div  class=col-md-6  ><label for=edit_contact>Contact No.</label><input type=tel id=edit_contact value='. $value->contact.' class=form-control phone name=edit_contact ></div></div><div class=row><div class=col-md-6 form-group><label for=edit_booking_date>Date</label><input id=edit_booking_date name=edit_booking_date type=text value='.$value->booking_date.' class=form-control><span class=validation_alert id=edit_booking_date_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6 form-group><label for=edit_start_time>Start Time</label><input type=text name=edit_start_time id=edit_start_time value='.$value->start_time.'  placeholder=Time class=form-control><span class=validation_alert id=edit_cal_start_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div></div> <div class=row><div class=col-md-6 form-group><label for=edit_end_time>End Time</label><input type=text name=edit_end_time id=edit_end_time value='.$value->end_time.'  placeholder=Time  class=form-control> <span class=validation_alert id=edit_cal_end_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6><label for=edit_status>Edit Status</label>';				echo "<select id=edit_status class=form-control name=edit_status ><option value=0>Select Status</option>";				echo "<option value=pending ";								if($value->status=="pending") {echo "selected='selected'";}				echo ">Pending</option>";				echo "<option value=approved ";  								if($value->status=="approved") { echo "selected='selected'"; }				echo ">Approved</option>";				echo "<option value=cancelled ";  								if($value->status=="cancelled") { echo "selected='selected'"; }				echo ">Cancelled</option></select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";				echo'<input id=edit_client_id value='.$value->id.' name=edit_client_id  type=hidden> </div><div class=col-md-12 id=payment_hide> <label for=payment_status>'.__("Payment Status", WL_A_P_SYSTEM ).'</label>';				echo "<select id=edit_payment_status class=form-control name=edit_payment_status ><option value=0>Select Status</option>";				echo "<option value=pending ";								if($value->payment_status=="pending") { echo "selected='selected'"; }				echo ">Pending</option>";				echo "<option value=approved ";  								if($value->payment_status=="approved") { echo "selected='selected'"; }				echo ">Approved</option>";				echo"</select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";				echo'</div><div class=col-md-12><div><strong>Repeat:</strong></div><input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="Non") {echo "checked='checked'";}				echo 'value=Non onclick=hideAll();><span class=Nclr style=color:#FE0000;>None</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="daily") {echo "checked='checked'";}				echo'value=daily onclick=showdaily();><span id=Dclr>Daily</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="weekly") {echo "checked='checked'";}				echo 'value=weekly onclick=showweekly()><span class=Wclr>Weekly</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="monthly") {echo "checked='checked'";}				echo 'value=monthly onclick=showmonthly()><span class=Mclr>Monthly</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';								if($value->repeat_appointment=="PD") {echo "checked='checked'";}				echo 'value=PD onclick=showParticularDate()><span class=PDclr>Particular Dates</span><div class=dailydiv name=dailydiv  style=display:none;><br><strong>Daily(s):</strong><input name=re_days_cl id=re_days type=text style=width:40px;  maxlength=2  value='.$value->re_days.'> (Min = 1, Max = 99 Days)</div><div class=weeklydiv name=weeklydiv style=display:none;><br><strong>Repeat Week(s):</strong><input name=re_weeks_cl id=re_weeks type=text style=width:40px;  maxlength=2 value='.$value->re_weeks.'>(Min = 1, Max = 99 Weeks)</div><div class=monthlydiv style=display:none;><br><strong>Repeat Month(s):</strong><input name=re_months_cl id=re_months type=text style=width:40px;  maxlength=2  value='.$value->re_months.'>(Min = 1, Max = 99 Months)</div><div class=PDdiv style=display:none;><br><strong>Start Date:</strong><input name=re_start_date_cl id=re_start_date_cl type=text value='.$value->re_start_date.'><br><br><strong>End Date:</strong> <input name=re_end_date_cl id=re_end_date_cl type=text value='.$value->re_end_date.'></div></div></div>",				"event_hover":"<table class=form-table  border=0>';				echo '<tr><td class=hover_border_remove>Staff Member</td><td class=hover_border_remove>';				foreach($appointment_staff_details as $staff_member_single_name ) {					if($value->staff_member==$staff_member_single_name->id) { 						echo $staff_member_single_name->staff_member_name;					}				}				echo '</td></tr>';				echo '<tr><td class=hover_border_remove>Services </td><td class=hover_border_remove>'.$value->service_type.'</td></tr> <tr><td class=hover_border_remove>Contact No</td><td class=hover_border_remove>'.$value->contact.'</td>';				echo '<tr><td class=hover_border_remove>Date</td><td class=hover_border_remove>';				$date_format=date("Y-M-d", strtotime($value->booking_date)); 				echo $date_format;				echo '</td></tr>';				echo '<tr><td class=hover_border_remove>Start Time </td><td class=hover_border_remove>'.$value->start_time.'</td></tr><tr><td class=hover_border_remove>End Time </td><td class=hover_border_remove>'.$value->end_time.'</td></tr><tr><td class=hover_border_remove>Status </td><td class=hover_border_remove>'.$value->status.'</td></tr> </table>"}';			}		}		// fetch record for particular date		if($value->repeat_appointment=="PD") {			//$bg_colors=array('#a54f9a','#606ca7','#6e7932','#90786f', '#bb7a7a','#8a3e98','#3193a9','#31a97d','#90740e','#838f98','#4a7396','#a95143','#a98043');				//shuffle($bg_colors);			if($value->status=='cancelled') { $bg_colors=$cancelled_color; }			if($value->status=='pending') { $bg_colors=$pending_color; }			if($value->status=='approved') { $bg_colors=$approved_color; }			$j=$value->id[$i++];			if($j==$value->id){echo $k="";} else{echo $k=",";}			echo '{"id":'.$value->id.',"title":"'.$value->client_name.'","start":"'.$value->re_start_date.'","end":"'.$value->re_end_date.'","backgroundColor":"'.$bg_colors.'","staff_member":"'.$value->staff_member.'","service_type":"'.$value->service_type.'","booking_date":"'.$value->re_start_date.'","status":"'.$value->status.'",			"details":"<div class=row><div class=col-md-6><label for=edit_client_name>Name</label>';			echo '<select id=edit_client_name value='.$value->client_name.' name=edit_client_name class=form-control ><option value=0>Select Customer</option>';			foreach($appointment_customer_details as $appointment_customer_single_detail) {				$n=$appointment_customer_single_detail->first_name.' '.$appointment_customer_single_detail->last_name;				echo '<option value=';				echo "'$n'";				if($n==$value->client_name) { echo "selected='selected'"; }				echo">";				echo $n;			}						echo'</option></select><span class=validation_alert id=edit_cal_customer_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>';			echo '</div><div class=col-md-6 form-group><label for=edit_staff_member>Staff Member</label>'; 			echo '<select id=edit_staff_member class=form-control name=edit_staff_member > <option value=0>Select Staff</option>';			foreach($appointment_staff_details as $appointment_staff_single_detail) {				echo "<option value='$appointment_staff_single_detail->id'";				if($appointment_staff_single_detail->id==$value->staff_member) { echo "selected='selected'"; }				echo ">";				echo $appointment_staff_single_detail->staff_member_name;			}			echo '</option></select><span class=validation_alert id=edit_cal_staff_alert>'. __("Please select one",WL_A_P_SYSTEM ).'</span>';				echo '</div></div><div class=row><div class=col-md-6 form-group><label for=edit_service_type>Services</label>';			echo '<select class=form-control name=edit_service_type id=edit_service_type><option value=0 selected=selected>-- Select a service --</option>';			foreach($appointment_category_details as $appointment_category_single_detail) {				echo "<optgroup label='$appointment_category_single_detail->name'>";				$service_table=$wpdb->prefix."apt_services";				$appointment_details = $wpdb->get_results( "SELECT * from $service_table where category= '$appointment_category_single_detail->id'");  				foreach($appointment_details as $appointment_single_detail) {					echo "<option value='$appointment_single_detail->name'";					if($appointment_single_detail->name==$value->service_type) { echo "selected='selected'"; }					echo ">";					echo $appointment_single_detail->name; 					echo '</option>';				}				echo '</optgroup>';			}			echo'</select><span class=validation_alert id=edit_cal_service_alert>'.__("Please select one",WL_A_P_SYSTEM ).'</span>'; 			echo'</div><div  class=col-md-6  ><label for=edit_contact>Contact No.</label><input type=tel id=edit_contact value='. $value->contact.' class=form-control phone name=edit_contact ></div></div><div class=row><div class=col-md-6 form-group><label for=edit_booking_date>Date</label><input id=edit_booking_date name=edit_booking_date type=text value='.$value->re_start_date.' class=form-control><span class=validation_alert id=edit_booking_date_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6 form-group><label for=edit_start_time>Start Time</label><input type=text name=edit_start_time id=edit_start_time value='.$value->start_time.'  placeholder=Time class=form-control><span class=validation_alert id=edit_cal_start_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div></div> <div class=row><div class=col-md-6 form-group><label for=edit_end_time>End Time</label><input type=text name=edit_end_time id=edit_end_time value='.$value->end_time.'  placeholder=Time  class=form-control> <span class=validation_alert id=edit_cal_end_time_alert>'.__("This field is required",WL_A_P_SYSTEM ).'</span></div> <div class=col-md-6><label for=edit_status>Edit Status</label>';			echo "<select id=edit_status class=form-control name=edit_status ><option value=0>Select Status</option>";			echo "<option value=pending ";						if($value->status=="pending") { echo "selected='selected'"; }			echo ">Pending</option>";			echo "<option value=approved ";  						if($value->status=="approved") { echo "selected='selected'"; }			echo ">Approved</option>";			echo "<option value=cancelled ";						if($value->status=="cancelled") {echo "selected='selected'";}			echo ">Cancelled</option></select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";			echo'<input id=edit_client_id value='.$value->id.' name=edit_client_id  type=hidden> </div><div class=col-md-12 id=payment_hide> <label for=payment_status>'.__("Payment Status", WL_A_P_SYSTEM ).'</label>';			echo "<select id=edit_payment_status class=form-control name=edit_payment_status ><option value=0>Select Status</option>";			echo "<option value=pending ";						if($value->payment_status=="pending") { echo "selected='selected'"; }			echo ">Pending</option>";			echo "<option value=approved ";  						if($value->payment_status=="approved") { echo "selected='selected'"; }			echo ">Approved</option>";			echo"</select><span class=validation_alert id=edit_cal_status_alert>".__("Please select one",WL_A_P_SYSTEM )."</span>";			echo'</div><div class=col-md-12> <div><strong>Repeat:</strong></div><input name=repeat_cl id=repeat_cl type=radio ';						if($value->repeat_appointment=="Non") { echo "checked='checked'"; }			echo 'value=Non onclick=hideAll();> <span class=Nclr style=color:#FE0000;>None</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';						if($value->repeat_appointment=="daily") { echo "checked='checked'"; }			echo'value=daily onclick=showdaily();> <span id=Dclr>Daily</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';						if($value->repeat_appointment=="weekly") { echo "checked='checked'"; }			echo 'value=weekly onclick=showweekly()> <span class=Wclr>Weekly</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';						if($value->repeat_appointment=="monthly") { echo "checked='checked'"; }			echo 'value=monthly onclick=showmonthly()> <span class=Mclr>Monthly</span>&nbsp;<input name=repeat_cl id=repeat_cl type=radio ';						if($value->repeat_appointment=="PD") {echo "checked='checked'";}			echo 'value=PD onclick=showParticularDate()> <span class=PDclr>Particular Dates</span><div class=dailydiv name=dailydiv  style=display:none;><br><strong>Daily(s):</strong><input name=re_days_cl id=re_days type=text style=width:40px;  maxlength=2  value='.$value->re_days.'> (Min = 1, Max = 99 Days)</div><div class=weeklydiv name=weeklydiv style=display:none;><br><strong>Repeat Week(s):</strong><input name=re_weeks_cl id=re_weeks type=text style=width:40px;  maxlength=2 value='.$value->re_weeks.'>(Min = 1, Max = 99 Weeks)</div><div class=monthlydiv style=display:none;><br><strong>Repeat Month(s):</strong><input name=re_months_cl id=re_months type=text style=width:40px;  maxlength=2  value='.$value->re_months.'>(Min = 1, Max = 99 Months)</div><div class=PDdiv style=display:none;><br><strong>Start Date:</strong><input name=re_start_date_cl id=re_start_date_cl type=text value='.$value->re_start_date.'><br><br><strong>End Date:</strong> <input name=re_end_date_cl id=re_end_date_cl type=text value='.$value->re_end_date.'></div></div></div>",			"event_hover":"<table class=form-table  border=0>';			echo '<tr><td class=hover_border_remove>Staff Member</td><td class=hover_border_remove>';			foreach($appointment_staff_details as $staff_member_single_name) {				if($value->staff_member==$staff_member_single_name->id) { 					echo $staff_member_single_name->staff_member_name;				}			} 			echo'</td></tr>';			echo '<tr><td class=hover_border_remove>Services </td><td class=hover_border_remove>'.$value->service_type.'</td></tr> <tr><td class=hover_border_remove>Contact No</td><td class=hover_border_remove>'.$value->contact.'</td>';			echo '<tr><td class=hover_border_remove>Date</td><td class=hover_border_remove>';			$date_format=date("Y-M-d", strtotime($value->booking_date)); 			echo $date_format;			echo '</td></tr>';			echo '<tr><td class=hover_border_remove>Start Time </td><td class=hover_border_remove>'.$value->start_time.'</td></tr><tr><td class=hover_border_remove>End Time </td><td class=hover_border_remove>'.$value->end_time.'</td></tr><tr><td class=hover_border_remove>Status </td><td class=hover_border_remove>'.$value->status.'</td></tr> </table>"}';		}	}echo "]"?> 